var X=Object.defineProperty;var Y=(s,e,n)=>e in s?X(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var E=(s,e,n)=>Y(s,typeof e!="symbol"?e+"":e,n);import{A as Z,l as T,B as P,C as A,D as M,E as K,G as ee,g as te,H as se,y as I,I as ae,r as k,J as V,K as ne,z as ie,L as oe,k as D,M as re,N as J,O as ce,P as le,Q as ue,u as de,R as fe,c as w,o as C,a as u,b as he,w as me,d as q,e as _e,i as $,t as z,F as ye,h as ge,m as F}from"./DGv5jN0q.js";import{u as ve}from"./DSPfhR4A.js";const pe=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],be=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",L=[];class xe{constructor(){E(this,"_data",new N);E(this,"_hash",new N([...pe]));E(this,"_nDataBytes",0);E(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const n=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(t+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,n){const t=this._hash.words;let a=t[0],o=t[1],i=t[2],f=t[3],d=t[4],g=t[5],r=t[6],p=t[7];for(let l=0;l<64;l++){if(l<16)L[l]=e[n+l]|0;else{const y=L[l-15],_=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,R=L[l-2],B=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;L[l]=_+L[l-7]+B+L[l-16]}const c=d&g^~d&r,m=a&o^a&i^o&i,h=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),v=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),b=p+v+c+be[l]+L[l],x=h+m;p=r,r=g,g=d,d=f+b|0,f=i,i=o,o=a,a=b+x|0}t[0]=t[0]+a|0,t[1]=t[1]+o|0,t[2]=t[2]+i|0,t[3]=t[3]+f|0,t[4]=t[4]+d|0,t[5]=t[5]+g|0,t[6]=t[6]+r|0,t[7]=t[7]+p|0}_append(e){typeof e=="string"&&(e=N.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let n,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const a=t*16,o=Math.min(a*4,this._data.sigBytes);if(a){for(let i=0;i<a;i+=16)this._doProcessBlock(this._data.words,i);n=this._data.words.splice(0,a),this._data.sigBytes-=o}return new N(n,o)}}class N{constructor(e,n){E(this,"words");E(this,"sigBytes");e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}static fromUtf8(e){const n=unescape(encodeURIComponent(e)),t=n.length,a=[];for(let o=0;o<t;o++)a[o>>>2]|=(n.charCodeAt(o)&255)<<24-o%4*8;return new N(a,t)}toBase64(){const e=[];for(let n=0;n<this.sigBytes;n+=3){const t=this.words[n>>>2]>>>24-n%4*8&255,a=this.words[n+1>>>2]>>>24-(n+1)%4*8&255,o=this.words[n+2>>>2]>>>24-(n+2)%4*8&255,i=t<<16|a<<8|o;for(let f=0;f<4&&n*8+f*6<this.sigBytes*8;f++)e.push(De.charAt(i>>>6*(3-f)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const t=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=t<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];this.sigBytes+=e.sigBytes}}function we(s){return new xe().finalize(s).toBase64()}function O(s){return we(Z(s))}const Ce={trailing:!0};function Be(s,e=25,n={}){if(n={...Ce,...n},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,a,o=[],i,f;const d=(g,r)=>(i=Pe(s,g,r),i.finally(()=>{if(i=null,n.trailing&&f&&!a){const p=d(g,f);return f=null,p}}),i);return function(...g){return i?(n.trailing&&(f=g),i):new Promise(r=>{const p=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const l=n.leading?t:d(this,g);for(const c of o)c(l);o=[]},e),p?(t=d(this,g),r(t)):o.push(r)})}}async function Pe(s,e,n){return await s.apply(e,n)}const Re=Symbol.for("nuxt:client-only"),ze=s=>s==="defer"||s===!1;function Me(...s){var c;const e=typeof s[s.length-1]=="string"?s.pop():void 0;Ee(s[0],s[1])&&s.unshift(e);let[n,t,a={}]=s;const o=T(()=>P(n));if(typeof o.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=A();a.server??(a.server=!0),a.default??(a.default=Se),a.getCachedData??(a.getCachedData=W),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=M.deep),a.dedupe??(a.dedupe="cancel"),a._functionName,i._asyncData[o.value];const f={cause:"initial",dedupe:a.dedupe};(c=i._asyncData[o.value])!=null&&c._init||(f.cachedData=a.getCachedData(o.value,i,{cause:"initial"}),i._asyncData[o.value]=G(i,o.value,t,a,f.cachedData));const d=i._asyncData[o.value];d._deps++;const g=()=>i._asyncData[o.value].execute(f),r=a.server!==!1&&i.payload.serverRendered;{let m=function(y){const _=i._asyncData[y];_!=null&&_._deps&&(_._deps--,_._deps===0&&(_==null||_._off()))};const h=K();if(h&&r&&a.immediate&&!h.sp&&(h.sp=[]),h&&!h._nuxtOnBeforeMountCbs){h._nuxtOnBeforeMountCbs=[];const y=h._nuxtOnBeforeMountCbs;ee(()=>{y.forEach(_=>{_()}),y.splice(0,y.length)}),te(()=>y.splice(0,y.length))}const v=h&&(h._nuxtClientOnly||se(Re,!1));r&&i.isHydrating&&(d.error.value||d.data.value!=null)?(d.pending.value=!1,d.status.value=d.error.value?"error":"success"):h&&(!v&&i.payload.serverRendered&&i.isHydrating||a.lazy)&&a.immediate?h._nuxtOnBeforeMountCbs.push(g):a.immediate&&g();const b=re(),x=I([o,...a.watch||[]],([y],[_])=>{var R,B;if((y||_)&&y!==_){const j=((R=i._asyncData[_])==null?void 0:R.data.value)!==M.value,H=i._asyncDataPromises[_]!==void 0;_&&m(_);const S={cause:"initial",dedupe:a.dedupe};(B=i._asyncData[y])!=null&&B._init||(S.cachedData=a.getCachedData(y,i,{cause:"initial"}),i._asyncData[y]=G(i,y,t,a,S.cachedData)),i._asyncData[y]._deps++,(a.immediate||j||H)&&i._asyncData[y].execute(S)}else d._execute({cause:"watch",dedupe:a.dedupe})},{flush:"sync"});b&&ae(()=>{x(),m(o.value)})}const p={data:U(()=>{var m;return(m=i._asyncData[o.value])==null?void 0:m.data}),pending:U(()=>{var m;return(m=i._asyncData[o.value])==null?void 0:m.pending}),status:U(()=>{var m;return(m=i._asyncData[o.value])==null?void 0:m.status}),error:U(()=>{var m;return(m=i._asyncData[o.value])==null?void 0:m.error}),refresh:(...m)=>i._asyncData[o.value].execute(...m),execute:(...m)=>i._asyncData[o.value].execute(...m),clear:()=>Q(i,o.value)},l=Promise.resolve(i._asyncDataPromises[o.value]).then(()=>p);return Object.assign(l,p),l}function U(s){return T({get(){var e;return(e=s())==null?void 0:e.value},set(e){const n=s();n&&(n.value=e)}})}function Ee(s,e){return!(typeof s=="string"||typeof s=="object"&&s!==null||typeof s=="function"&&typeof e=="function")}function Q(s,e){e in s.payload.data&&(s.payload.data[e]=void 0),e in s.payload._errors&&(s.payload._errors[e]=M.errorValue),s._asyncData[e]&&(s._asyncData[e].data.value=void 0,s._asyncData[e].error.value=M.errorValue,s._asyncData[e].pending.value=!1,s._asyncData[e].status.value="idle"),e in s._asyncDataPromises&&(s._asyncDataPromises[e]&&(s._asyncDataPromises[e].cancelled=!0),s._asyncDataPromises[e]=void 0)}function Le(s,e){const n={};for(const t of e)n[t]=s[t];return n}function G(s,e,n,t,a){var p;(p=s.payload._errors)[e]??(p[e]=M.errorValue);const o=t.getCachedData!==W,i=n,f=t.deep?k:V,d=a!=null,g=s.hook("app:data:refresh",async l=>{(!l||l.includes(e))&&await r.execute({cause:"refresh:hook"})}),r={data:f(d?a:t.default()),pending:V(!d),error:ne(s.payload._errors,e),status:V("idle"),execute:(...l)=>{const[c,m=void 0]=l,h=c&&m===void 0&&typeof c=="object"?c:{};if(s._asyncDataPromises[e]){if(ze(h.dedupe??t.dedupe))return s._asyncDataPromises[e];s._asyncDataPromises[e].cancelled=!0}if(h.cause==="initial"||s.isHydrating){const b="cachedData"in h?h.cachedData:t.getCachedData(e,s,{cause:h.cause??"refresh:manual"});if(b!=null)return s.payload.data[e]=r.data.value=b,r.error.value=M.errorValue,r.status.value="success",Promise.resolve(b)}r.pending.value=!0,r.status.value="pending";const v=new Promise((b,x)=>{try{b(i(s))}catch(y){x(y)}}).then(async b=>{if(v.cancelled)return s._asyncDataPromises[e];let x=b;t.transform&&(x=await t.transform(b)),t.pick&&(x=Le(x,t.pick)),s.payload.data[e]=x,r.data.value=x,r.error.value=M.errorValue,r.status.value="success"}).catch(b=>{if(v.cancelled)return s._asyncDataPromises[e];r.error.value=oe(b),r.data.value=D(t.default()),r.status.value="error"}).finally(()=>{v.cancelled||(r.pending.value=!1,delete s._asyncDataPromises[e])});return s._asyncDataPromises[e]=v,s._asyncDataPromises[e]},_execute:Be((...l)=>r.execute(...l),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var l;g(),(l=s._asyncData[e])!=null&&l._init&&(s._asyncData[e]._init=!1),o||ie(()=>{var c;(c=s._asyncData[e])!=null&&c._init||(Q(s,e),r.execute=()=>Promise.resolve(),r.data.value=M.value)})}};return r}const Se=()=>M.value,W=(s,e,n)=>{if(e.isHydrating)return e.payload.data[s];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return e.static.data[s]};function Oe(s,e,n){const[t={},a]=typeof e=="string"?[{},e]:[e,n],o=T(()=>P(s)),i=T(()=>P(t.key)||"$f"+O([a,typeof o.value=="string"?o.value:"",...Ne(t)]));if(!t.baseURL&&typeof o.value=="string"&&o.value[0]==="/"&&o.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:d,default:g,transform:r,pick:p,watch:l,immediate:c,getCachedData:m,deep:h,dedupe:v,...b}=t,x=J({...ce,...b,cache:typeof t.cache=="boolean"?void 0:t.cache}),y={server:f,lazy:d,default:g,transform:r,pick:p,immediate:c,getCachedData:m,deep:h,dedupe:v,watch:l===!1?[]:[...l||[],x]};if(!c){let B=function(){y.immediate=!0};I(i,B,{flush:"sync",once:!0}),I([...l||[],x],B,{flush:"sync",once:!0})}let _;return Me(l===!1?i.value:i,()=>{var S;(S=_==null?void 0:_.abort)==null||S.call(_,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),_=typeof AbortController<"u"?new AbortController:{};const B=P(t.timeout);let j;return B&&(j=setTimeout(()=>_.abort(new DOMException("Request aborted due to timeout.","AbortError")),B),_.signal.onabort=()=>clearTimeout(j)),(t.$fetch||globalThis.$fetch)(o.value,{signal:_.signal,...x}).finally(()=>{clearTimeout(j)})},y)}function Ne(s){var n;const e=[((n=P(s.method))==null?void 0:n.toUpperCase())||"GET",P(s.baseURL)];for(const t of[s.params||s.query]){const a=P(t);if(!a)continue;const o={};for(const[i,f]of Object.entries(a))o[P(i)]=P(f);e.push(o)}if(s.body){const t=P(s.body);if(!t)e.push(O(t));else if(t instanceof ArrayBuffer)e.push(O(Object.fromEntries([...new Uint8Array(t).entries()].map(([a,o])=>[a,o.toString()]))));else if(t instanceof FormData){const a={};for(const o of t.entries()){const[i,f]=o;a[i]=f instanceof File?f.name:f}e.push(O(a))}else if(le(t))e.push(O(J(t)));else try{e.push(O(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}const je={class:"min-h-screen bg-gray-50"},Te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ue={class:"mb-8"},Ve={class:"bg-white shadow rounded-lg p-6 mb-6"},Fe={class:"flex items-center space-x-3"},Ie={class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},ke=["d"],He={class:"text-sm text-gray-900"},qe={class:"mt-2 text-sm text-gray-500"},$e={class:"bg-white shadow rounded-lg p-6"},Ge={key:0,class:"text-center py-8"},Je={key:1,class:"text-center py-8"},Qe={class:"text-sm text-gray-500"},We={key:2,class:"space-y-4"},Xe={class:"font-medium text-gray-900"},Ye={class:"text-sm text-gray-500 mt-1"},Ze={class:"mt-2 flex space-x-2"},Ae={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ke={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},et={key:3,class:"text-center py-8"},tt={class:"mt-6 bg-white shadow rounded-lg p-6"},st=["disabled"],at={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},rt=ue({__name:"api-test",async setup(s){let e,n;ve({title:"Test API - Template Nuxt + Strapi"});const a=de().public.strapiUrl,{data:o,pending:i,error:f}=([e,n]=fe(()=>Oe("/api/content-types",{baseURL:a,server:!1,default:()=>[]},"$bqoz_vDPL5")),e=await e,n(),e),d=T(()=>i.value?{color:"text-yellow-500",icon:"M10 2a8 8 0 100 16 8 8 0 000-16z",message:"Connexion en cours..."}:f.value?{color:"text-red-500",icon:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",message:"Connexion échouée"}:{color:"text-green-500",icon:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",message:"Connexion réussie"}),g=k(!1),r=k(null),p=async()=>{var l,c,m,h;g.value=!0,r.value=null;try{const v=await $fetch("/",{baseURL:a});r.value={success:!0,message:"Connexion réussie ! L'API Strapi répond correctement."}}catch(v){((l=v==null?void 0:v.response)==null?void 0:l.status)===404||((c=v==null?void 0:v.response)==null?void 0:c.status)===302||((h=(m=v==null?void 0:v.data)==null?void 0:m.error)==null?void 0:h.name)==="NotFoundError"||a.includes("strapiapp.com")?r.value={success:!0,message:"Connexion réussie ! Strapi Cloud est accessible et fonctionne."}:r.value={success:!1,message:`Erreur de connexion : ${v.message||"Impossible de joindre l'API"}`}}finally{g.value=!1}};return(l,c)=>{const m=_e;return C(),w("div",je,[u("div",Te,[u("div",Ue,[he(m,{to:"/",class:"inline-flex items-center text-indigo-600 hover:text-indigo-500 mb-4"},{default:me(()=>[...c[0]||(c[0]=[u("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),q(" Retour à l'accueil ",-1)])]),_:1}),c[1]||(c[1]=u("h1",{class:"text-3xl font-bold text-gray-900"},"Test API Strapi",-1)),c[2]||(c[2]=u("p",{class:"mt-2 text-gray-600"},"Testez la connexion et les endpoints de votre API Strapi",-1))]),u("div",Ve,[c[3]||(c[3]=u("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Statut de l'API",-1)),u("div",Fe,[u("div",{class:$([D(d).color,"flex-shrink-0"])},[(C(),w("svg",Ie,[u("path",{"fill-rule":"evenodd",d:D(d).icon,"clip-rule":"evenodd"},null,8,ke)]))],2),u("span",He,z(D(d).message),1)]),u("div",qe," URL: "+z(D(a)),1)]),u("div",$e,[c[7]||(c[7]=u("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Content Types disponibles",-1)),D(i)?(C(),w("div",Ge,[...c[4]||(c[4]=[u("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),u("p",{class:"mt-2 text-sm text-gray-500"},"Chargement...",-1)])])):D(f)?(C(),w("div",Je,[c[5]||(c[5]=u("div",{class:"text-red-500 mb-2"},[u("svg",{class:"h-12 w-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),u("p",Qe,z(D(f)),1)])):D(o)&&D(o).length>0?(C(),w("div",We,[(C(!0),w(ye,null,ge(D(o),h=>(C(),w("div",{key:h.uid,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[u("h3",Xe,z(h.info.displayName),1),u("p",Ye,z(h.uid),1),u("div",Ze,[u("span",Ae,z(h.kind),1),h.info.pluralName?(C(),w("span",Ke,z(h.info.pluralName),1)):F("",!0)])]))),128))])):(C(),w("div",et,[...c[6]||(c[6]=[u("div",{class:"text-gray-400 mb-2"},[u("svg",{class:"h-12 w-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),u("p",{class:"text-sm text-gray-500"},"Aucun content type trouvé",-1)])]))]),u("div",tt,[c[9]||(c[9]=u("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Test rapide",-1)),u("button",{onClick:p,disabled:D(g),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[D(g)?(C(),w("svg",at,[...c[8]||(c[8]=[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):F("",!0),q(" "+z(D(g)?"Test en cours...":"Tester la connexion"),1)],8,st),D(r)?(C(),w("div",{key:0,class:$(["mt-4 p-3 rounded-md",D(r).success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"])},z(D(r).message),3)):F("",!0)])])])}}});export{rt as default};
