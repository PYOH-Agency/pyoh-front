import{_ as U,r as w,l as k,f as Y,z as se,g as oe,c as l,o as a,a as e,m as f,F as L,h as S,i as D,d as X,j as re,t as _,u as ae,q as le,w as F,W as ne,X as ie,b as I,S as ue,e as de}from"./DGv5jN0q.js";import{_ as ce}from"./CPK8ijHk.js";import{u as ve}from"./DSPfhR4A.js";const pe={class:"space-y-8"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},fe=["onClick"],he=["src","alt"],me={key:0,class:"text-center pt-8"},ye=["disabled"],xe={key:0},be={key:1,class:"flex items-center justify-center"},we={__name:"ImageGallery",props:{images:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},imagesPerPage:{type:Number,default:10},strapiUrl:{type:String,default:""}},emits:["imageClick"],setup(v,{emit:M}){const t=v,p=w(1),g=w(!1),d=k(()=>!t.images||!Array.isArray(t.images)?[]:t.images.slice(0,p.value*t.imagesPerPage)),i=k(()=>t.loading?8:g.value?4:0),c=k(()=>t.images&&Array.isArray(t.images)&&d.value.length<t.images.length),$=(r,u)=>{const n=["row-span-1","row-span-2","row-span-1","row-span-2","row-span-1","row-span-2"];return`${n[u%n.length]} col-span-1`},h=r=>{var u,n,m;return r?r.url?r.url:(u=r.attributes)!=null&&u.url?r.attributes.url:(m=(n=r.data)==null?void 0:n.attributes)!=null&&m.url?r.data.attributes.url:"":""},B=r=>{var u,n,m,C,P,z;return r?r.name?r.name:(u=r.attributes)!=null&&u.name?r.attributes.name:r.alternativeText?r.alternativeText:(n=r.attributes)!=null&&n.alternativeText?r.attributes.alternativeText:(C=(m=r.data)==null?void 0:m.attributes)!=null&&C.name?r.data.attributes.name:(z=(P=r.data)==null?void 0:P.attributes)!=null&&z.alternativeText?r.data.attributes.alternativeText:"":""},j=async()=>{g.value||(g.value=!0,await new Promise(r=>setTimeout(r,800)),p.value++,g.value=!1)};return Y(()=>{const r=new IntersectionObserver(u=>{u.forEach(n=>{n.isIntersecting&&c.value&&!g.value&&j()})},{threshold:.1});se(()=>{const u=document.querySelector(".grid > div:last-child");u&&r.observe(u)}),oe(()=>{r.disconnect()})}),(r,u)=>(a(),l("div",pe,[e("div",ge,[(a(!0),l(L,null,S(d.value,(n,m)=>(a(),l("div",{key:n.id,onClick:C=>r.$emit("imageClick",m),class:D(["cursor-pointer group overflow-hidden shadow-lg relative",$(n,m)])},[e("img",{src:h(n),alt:B(n)||`Image ${m+1}`,class:"w-full h-full object-cover transition-all duration-500 group-hover:scale-110",loading:"lazy"},null,8,he),u[0]||(u[0]=e("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})])],-1))],10,fe))),128)),(a(!0),l(L,null,S(i.value,n=>(a(),l("div",{key:`skeleton-${n}`,class:D(["animate-pulse",$({},n)])},[...u[1]||(u[1]=[e("div",{class:"w-full h-full bg-gray-200 rounded-lg"},null,-1)])],2))),128))]),c.value?(a(),l("div",me,[e("button",{onClick:j,disabled:g.value,class:"px-8 py-3 bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-400 transition-all duration-300 font-light"},[g.value?(a(),l("span",be,[...u[2]||(u[2]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),X(" Chargement... ",-1)])])):(a(),l("span",xe,"Voir plus d'images"))],8,ye)])):f("",!0)]))}},_e=U(we,[["__scopeId","data-v-2cccc757"]]),ke={class:"space-y-6 pb-8"},$e={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ce=["onClick"],je={class:"p-4"},Ve={class:"text-sm font-medium text-gray-900 group-hover:text-yellow-600 transition-colors duration-300"},Ae={key:1,class:"text-center py-12"},Ie={class:"text-gray-500 text-base font-light"},Me={__name:"VideoGallery",props:{videos:{type:Array,default:()=>[]}},emits:["videoClick"],setup(v,{emit:M}){return(t,p)=>(a(),l("div",ke,[v.videos&&Array.isArray(v.videos)&&v.videos.length>0?(a(),l("div",$e,[(a(!0),l(L,null,S(v.videos,(g,d)=>(a(),l("div",{key:d,onClick:i=>t.$emit("videoClick",d),class:"group cursor-pointer bg-gray-50 hover:bg-gray-100 transition-all duration-300 overflow-hidden"},[p[1]||(p[1]=re('<div class="relative aspect-video bg-gray-200 overflow-hidden" data-v-3801cab5><div class="absolute inset-0 bg-gradient-to-br from-black/20 to-black/40" data-v-3801cab5></div><div class="absolute inset-0 flex items-center justify-center" data-v-3801cab5><div class="w-16 h-16 bg-white/90 rounded-full flex items-center justify-center group-hover:bg-yellow-400 transition-all duration-300" data-v-3801cab5><svg class="w-8 h-8 text-gray-800 group-hover:text-white" fill="currentColor" viewBox="0 0 24 24" data-v-3801cab5><path d="M8 5v14l11-7z" data-v-3801cab5></path></svg></div></div><div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded" data-v-3801cab5> Vidéo </div></div>',1)),e("div",je,[e("h4",Ve,_(g.name||`Vidéo ${d+1}`),1),p[0]||(p[0]=e("p",{class:"text-xs text-gray-500 mt-1"},"Cliquez pour regarder",-1))])],8,Ce))),128))])):(a(),l("div",Ae,[p[2]||(p[2]=e("div",{class:"w-14 h-14 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-7 h-7 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("p",Ie,_(v.videos?"Aucune vidéo disponible pour ce projet":"Chargement..."),1)]))]))}},Pe=U(Me,[["__scopeId","data-v-3801cab5"]]),ze={class:"relative max-w-6xl w-full max-h-full p-8"},Be={class:"w-full aspect-video bg-black"},Te=["src"],Ne={class:"mt-4 text-center"},Le={class:"text-xl font-light text-white"},Se={__name:"VideoViewer",props:{open:{type:Boolean,default:!1},videos:{type:Array,default:()=>[]},currentIndex:{type:Number,default:0}},emits:["close","previous","next"],setup(v,{emit:M}){const t=v,p=k(()=>!t.videos||!Array.isArray(t.videos)||t.videos.length===0?null:t.videos[t.currentIndex]||null),g=d=>{var c;if(!d)return"";const i=(c=d.match(/vimeo\.com\/(\d+)/))==null?void 0:c[1];return i?`https://player.vimeo.com/video/${i}?h=hash&dnt=1&title=0&byline=0&portrait=0`:d};return(d,i)=>{var c,$;return v.open?(a(),l("div",{key:0,class:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",onClick:i[3]||(i[3]=h=>d.$emit("close"))},[e("div",ze,[e("button",{onClick:i[0]||(i[0]=h=>d.$emit("close")),class:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10"},[...i[4]||(i[4]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",Be,[e("iframe",{src:g((c=p.value)==null?void 0:c.url),class:"w-full h-full",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:""},null,8,Te)]),e("div",Ne,[e("h3",Le,_((($=p.value)==null?void 0:$.name)||`Vidéo ${v.currentIndex+1}`),1)]),v.videos&&Array.isArray(v.videos)&&v.videos.length>1?(a(),l("button",{key:0,onClick:i[1]||(i[1]=h=>d.$emit("previous")),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10"},[...i[5]||(i[5]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])):f("",!0),v.videos&&Array.isArray(v.videos)&&v.videos.length>1?(a(),l("button",{key:1,onClick:i[2]||(i[2]=h=>d.$emit("next")),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10"},[...i[6]||(i[6]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):f("",!0)])])):f("",!0)}}},Ue={key:0,class:"py-16 px-4"},Ge={class:"max-w-4xl mx-auto mb-16"},He={class:"text-5xl md:text-6xl font-primary mb-8 text-gray-900 leading-tight"},Re={class:"flex flex-wrap gap-8 mb-12 text-sm text-gray-600"},We={key:0,class:"flex items-center space-x-2"},Ee={class:"font-paragraph"},Oe={key:1,class:"flex items-center space-x-2"},qe={class:"font-paragraph"},De={key:2,class:"flex items-center space-x-2"},Fe=["href"],Ye={key:0,class:"prose prose-lg max-w-none"},Xe={class:"text-gray-700 leading-relaxed font-paragraph"},Je={class:"max-w-6xl mx-auto"},Ke={key:0,class:"flex justify-center mb-12"},Qe={key:1},Ze={key:2},et={key:1,class:"min-h-screen flex items-center justify-center"},tt={key:2,class:"min-h-screen flex items-center justify-center"},st={class:"text-center max-w-md mx-auto px-8"},ot={class:"text-gray-600 text-lg mb-6 font-paragraph"},rt={class:"relative max-w-7xl max-h-full p-8"},at={class:"flex items-center justify-center h-full"},lt=["src","alt"],nt={key:0,class:"absolute inset-x-0 bottom-8 flex justify-center space-x-4"},it=["disabled"],ut={class:"px-4 py-2 bg-white/20 text-white rounded-full text-sm font-secondary"},dt=["disabled"],ct={__name:"[slug]",setup(v){const M=ne();ie();const t=w(null),p=w(!0),g=w(null),d=w("gallery"),i=w(!1),c=w(0),$=w(!1),h=w(0),B=k(()=>{var s;const o=[{label:"Galerie",value:"gallery"}];return(s=t.value)!=null&&s.url_videos&&t.value.url_videos.length>0&&o.push({label:"Vidéos",value:"videos"}),o}),j=()=>{var o;(o=t.value)!=null&&o.url_videos&&t.value.url_videos.length>0?d.value="videos":d.value="gallery"},u=ae().public.strapiUrl,n=k(()=>{var o;return(o=t.value)!=null&&o.media?t.value.media.filter(s=>{var x,b,y;return((x=s.mime)==null?void 0:x.startsWith("image/"))||((y=(b=s.attributes)==null?void 0:b.mime)==null?void 0:y.startsWith("image/"))}):[]}),m=k(()=>{var o;return(o=t.value)!=null&&o.media?t.value.media.filter(s=>{var x,b,y;return((x=s.mime)==null?void 0:x.startsWith("video/"))||((y=(b=s.attributes)==null?void 0:b.mime)==null?void 0:y.startsWith("video/"))}):[]}),C=k(()=>m.value.length>0),P=o=>o?o.startsWith("http")?o:`${u}${o}`:"",z=o=>{c.value=o,i.value=!0},G=()=>{i.value=!1},J=o=>{var s;if(!((s=t.value)!=null&&s.url_videos)||!Array.isArray(t.value.url_videos)){console.warn("Aucune vidéo disponible pour ce projet");return}h.value=o,$.value=!0},K=()=>{$.value=!1},Q=()=>{c.value<n.value.length-1&&c.value++},Z=()=>{c.value>0&&c.value--},ee=async()=>{try{p.value=!0,g.value=null;const o=M.params.slug;let s=!1;const x=await $fetch(`${u}/api/projects?populate[0]=media&populate[1]=coverPicture&populate[2]=project_types&populate[3]=url_videos&populate[4]=homeMedia`);if(x.data&&x.data.length>0){const b=x.data.find(y=>te(y.title)===o);if(b)t.value=b,s=!0,j();else if(!isNaN(o)){const y=await $fetch(`${u}/api/projects/${o}?populate[0]=media&populate[1]=coverPicture&populate[2]=project_types&populate[3]=url_videos&populate[4]=homeMedia`);y.data&&(t.value=y.data,s=!0,j())}}s||(g.value="Projet non trouvé")}catch(o){console.error("❌ Erreur lors de la récupération du projet:",o),g.value="Erreur lors du chargement du projet"}finally{p.value=!1}},te=o=>o?o.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,""):"";return Y(()=>{ee()}),ve({title:k(()=>t.value?`${t.value.title} - Portfolio PYOH`:"Projet - Portfolio PYOH"),meta:[{name:"description",content:k(()=>{var o;return((o=t.value)==null?void 0:o.description)||"Découvrez ce projet de notre portfolio"})}]}),(o,s)=>{var T;const x=ue,b=de,y=ce;return a(),le(y,{"page-type":"project-detail",backgroundColor:"white","current-page":((T=t.value)==null?void 0:T.title)||"Chargement...",padding:"none","max-width":"full"},{default:F(()=>{var H,R,W,E;return[t.value?(a(),l("main",Ue,[e("div",Ge,[e("h1",He,_(t.value.title),1),e("div",Re,[t.value.client?(a(),l("div",We,[s[3]||(s[3]=e("span",{class:"font-secondary"},"Client :",-1)),e("span",Ee,_(t.value.client),1)])):f("",!0),t.value.year?(a(),l("div",Oe,[s[4]||(s[4]=e("span",{class:"font-secondary"},"Année :",-1)),e("span",qe,_(t.value.year),1)])):f("",!0),t.value.projectUrl?(a(),l("div",De,[s[5]||(s[5]=e("span",{class:"font-secondary"},"Lien :",-1)),e("a",{href:t.value.projectUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline font-paragraph"}," Voir le projet ",8,Fe)])):f("",!0)]),t.value.description?(a(),l("div",Ye,[e("p",Xe,_(t.value.description),1)])):f("",!0)]),e("div",Je,[C.value?(a(),l("div",Ke,[I(x,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=N=>d.value=N),tabs:B.value,color:"gray-600","active-color":"pyoh-yellow"},null,8,["modelValue","tabs"])])):f("",!0),d.value==="gallery"?(a(),l("div",Qe,[I(_e,{images:n.value||[],loading:p.value,"images-per-page":10,onImageClick:z},null,8,["images","loading"])])):d.value==="videos"?(a(),l("div",Ze,[I(Pe,{videos:((H=t.value)==null?void 0:H.url_videos)||[],onVideoClick:J},null,8,["videos"])])):f("",!0)])])):p.value?(a(),l("div",et,[...s[6]||(s[6]=[e("div",{class:"text-center"},[e("div",{class:"inline-block relative"},[e("div",{class:"w-8 h-8 border-2 border-gray-200 rounded-full"}),e("div",{class:"absolute inset-0 w-8 h-8 border-2 border-gray-900 border-t-transparent rounded-full animate-spin"})]),e("p",{class:"mt-6 text-gray-500 font-paragraph"},"Chargement du projet...")],-1)])])):g.value?(a(),l("div",tt,[e("div",st,[e("p",ot,_(g.value),1),I(b,{to:"/portfolio",class:"px-6 py-3 bg-gray-900 text-white rounded-none hover:bg-gray-800 transition-all duration-300 font-secondary"},{default:F(()=>[...s[7]||(s[7]=[X(" Retour au portfolio ",-1)])]),_:1})])])):f("",!0),i.value?(a(),l("div",{key:3,class:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",onClick:G},[e("div",rt,[e("button",{onClick:G,class:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10"},[...s[8]||(s[8]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",at,[e("img",{src:P((R=n.value[c.value])==null?void 0:R.url),alt:((W=n.value[c.value])==null?void 0:W.name)||"Image",class:"max-w-full max-h-full object-contain"},null,8,lt)]),n.value.length>1?(a(),l("div",nt,[e("button",{onClick:Z,class:"p-2 bg-white/20 text-white rounded-full hover:bg-white/30 transition-colors",disabled:c.value===0},[...s[9]||(s[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,it),e("span",ut,_(c.value+1)+" / "+_(n.value.length),1),e("button",{onClick:Q,class:"p-2 bg-white/20 text-white rounded-full hover:bg-white/30 transition-colors",disabled:c.value===n.value.length-1},[...s[10]||(s[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,dt)])):f("",!0)])])):f("",!0),I(Se,{open:$.value,videos:((E=t.value)==null?void 0:E.url_videos)||[],"current-index":h.value,onClose:K,onPrevious:s[1]||(s[1]=N=>{var V,A,O,q;return h.value=(h.value-1+(((A=(V=t.value)==null?void 0:V.url_videos)==null?void 0:A.length)||0))%(((q=(O=t.value)==null?void 0:O.url_videos)==null?void 0:q.length)||1)}),onNext:s[2]||(s[2]=N=>{var V,A;return h.value=(h.value+1)%(((A=(V=t.value)==null?void 0:V.url_videos)==null?void 0:A.length)||1)})},null,8,["open","videos","current-index"])]}),_:1},8,["current-page"])}}},ft=U(ct,[["__scopeId","data-v-5e7929a6"]]);export{ft as default};
