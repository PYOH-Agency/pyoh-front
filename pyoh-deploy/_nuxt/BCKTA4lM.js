import{U as C,V as L,r as f,u as Z,l as E}from"./DGv5jN0q.js";const $=()=>{const n=C();return L()!=="v4"&&console.warn("useStrapi4 is only available for v4"),{find:(d,i,o)=>n(`/${d}`,{method:"GET",params:i,...o}),findOne:(d,i,o,g)=>{typeof i=="object"&&(o=i,i=void 0);const v=[d,i].filter(Boolean).join("/");return n(v,{method:"GET",params:o,...g})},create:(d,i)=>n(`/${d}`,{method:"POST",body:{data:i}}),update:(d,i,o)=>{typeof i=="object"&&(o=i,i=void 0);const g=[d,i].filter(Boolean).join("/");return n(g,{method:"PUT",body:{data:o}})},delete:(d,i)=>{const o=[d,i].filter(Boolean).join("/");return n(o,{method:"DELETE"})}}},B=()=>$(),D=()=>{const{find:n,findOne:y}=B(),s=f([]),h=f([]),u=f(!1),l=f(null),w=async a=>{try{u.value=!0,l.value=null;const r=await n("projects",{populate:(a==null?void 0:a.populate)||["media","homeMedia","coverPicture","project_types","url_videos"],sort:(a==null?void 0:a.sort)||["createdAt:desc"],filters:(a==null?void 0:a.filters)||{},pagination:(a==null?void 0:a.pagination)||{page:1,pageSize:100}});s.value=r.data||[]}catch(r){console.error("Erreur lors de la récupération des projets:",r),l.value="Erreur lors de la récupération des projets",s.value=j()}finally{u.value=!1}},d=async()=>{try{u.value=!0,l.value=null;const r=Z().public.strapiUrl||"http://localhost:1337",c=`${r}/api/projects?populate[0]=coverPicture&populate[1]=media&populate[2]=homeMedia&populate[3]=project_types&populate[4]=url_videos&filters[featured][$eq]=true&sort=createdAt:desc&pagination[pageSize]=10`,p=await $fetch(c);if(p.data&&p.data.length>0)h.value=p.data.map(t=>{var m,e,M,b;return{id:t.id,attributes:{title:t.title,subtitle:t.subtitle,category:t.type||"Projet",client:t.client,year:t.year,featured:t.featured,projectUrl:t.projectUrl,media:t.media&&t.media.length>0?{data:{id:t.media[0].id,attributes:{url:t.media[0].url,name:t.media[0].name||t.title,width:t.media[0].width,height:t.media[0].height,ext:t.media[0].ext,mime:t.media[0].mime}}}:null,homeMedia:(M=(e=(m=t.homeMedia)==null?void 0:m.data)==null?void 0:e.attributes)!=null&&M.url?{data:{id:t.homeMedia.data.id,attributes:{url:t.homeMedia.data.attributes.url,name:t.homeMedia.data.attributes.name||t.title,width:t.homeMedia.data.attributes.width,height:t.homeMedia.data.attributes.height,ext:t.homeMedia.data.attributes.ext,mime:t.homeMedia.data.attributes.mime}}}:Array.isArray(t.homeMedia)&&t.homeMedia.length>0?{data:{id:t.homeMedia[0].id,attributes:{url:t.homeMedia[0].url,name:t.homeMedia[0].name||t.title,width:t.homeMedia[0].width,height:t.homeMedia[0].height,ext:t.homeMedia[0].ext,mime:t.homeMedia[0].mime}}}:(b=t.homeMedia)!=null&&b.url?{data:{id:t.homeMedia.id,attributes:{url:t.homeMedia.url,name:t.homeMedia.name||t.title,width:t.homeMedia.width,height:t.homeMedia.height,ext:t.homeMedia.ext,mime:t.homeMedia.mime}}}:null,createdAt:t.createdAt,updatedAt:t.updatedAt}}});else{const t=`${r}/api/projects?populate[0]=coverPicture&populate[1]=media&populate[2]=homeMedia&populate[3]=project_types&sort=createdAt:desc&pagination[pageSize]=3`,m=await $fetch(t);m.data&&m.data.length>0&&(h.value=m.data.map(e=>{var M,b,A,x,T,P,S,U;return{id:e.id,attributes:{title:e.title,subtitle:e.subtitle,category:e.type||"Projet",client:e.client,year:e.year,featured:e.featured,projectUrl:e.projectUrl,media:e.media&&e.media.length>0?{data:{id:e.media[0].id,attributes:{url:e.media[0].url,name:e.media[0].name||e.title,width:e.media[0].width,height:e.media[0].height,ext:e.media[0].ext,mime:e.media[0].mime}}}:null,homeMedia:(A=(b=(M=e.homeMedia)==null?void 0:M.data)==null?void 0:b.attributes)!=null&&A.url?{data:{id:e.homeMedia.data.id,attributes:{url:e.homeMedia.data.attributes.url,name:e.homeMedia.data.attributes.name||e.title,width:e.homeMedia.data.attributes.width,height:e.homeMedia.data.attributes.height,ext:e.homeMedia.data.attributes.ext,mime:e.homeMedia.data.attributes.mime}}}:Array.isArray(e.homeMedia)&&e.homeMedia.length>0?{data:{id:e.homeMedia[0].id,attributes:{url:e.homeMedia[0].url,name:e.homeMedia[0].name||e.title,width:e.homeMedia[0].width,height:e.homeMedia[0].height,ext:e.homeMedia[0].ext,mime:e.homeMedia[0].mime}}}:(x=e.homeMedia)!=null&&x.url?{data:{id:e.homeMedia.id,attributes:{url:e.homeMedia.url,name:e.homeMedia.name||e.title,width:e.homeMedia.width,height:e.homeMedia.height,ext:e.homeMedia.ext,mime:e.homeMedia.mime}}}:null,homeMedia:(S=(P=(T=e.homeMedia)==null?void 0:T.data)==null?void 0:P.attributes)!=null&&S.url?{data:{id:e.homeMedia.data.id,attributes:{url:e.homeMedia.data.attributes.url,name:e.homeMedia.data.attributes.name||e.title,width:e.homeMedia.data.attributes.width,height:e.homeMedia.data.attributes.height,ext:e.homeMedia.data.attributes.ext,mime:e.homeMedia.data.attributes.mime}}}:Array.isArray(e.homeMedia)&&e.homeMedia.length>0?{data:{id:e.homeMedia[0].id,attributes:{url:e.homeMedia[0].url,name:e.homeMedia[0].name||e.title,width:e.homeMedia[0].width,height:e.homeMedia[0].height,ext:e.homeMedia[0].ext,mime:e.homeMedia[0].mime}}}:(U=e.homeMedia)!=null&&U.url?{data:{id:e.homeMedia.id,attributes:{url:e.homeMedia.url,name:e.homeMedia.name||e.title,width:e.homeMedia.width,height:e.homeMedia.height,ext:e.homeMedia.ext,mime:e.homeMedia.mime}}}:null,createdAt:e.createdAt,updatedAt:e.updatedAt}}}))}h.value.length===0&&(h.value=j().slice(0,3))}catch(a){console.error("❌ Erreur Strapi:",a),l.value="Erreur lors de la récupération des projets",h.value=j().slice(0,3)}finally{u.value=!1}},i=async a=>{try{return u.value=!0,l.value=null,await y("projects",a,{populate:["media"]})}catch(r){return console.error("Erreur lors de la récupération du projet:",r),l.value="Erreur lors de la récupération du projet",null}finally{u.value=!1}},o=a=>E(()=>s.value.filter(r=>r.attributes.category===a)),g=()=>E(()=>{const a=s.value.map(r=>r.attributes.category);return[...new Set(a)]}),v=a=>{if(!a.trim())return s.value;const r=a.toLowerCase();return s.value.filter(c=>{var p;return c.attributes.title.toLowerCase().includes(r)||c.attributes.subtitle.toLowerCase().includes(r)||((p=c.attributes.description)==null?void 0:p.toLowerCase().includes(r))||c.attributes.category.toLowerCase().includes(r)})},j=()=>[{id:1,attributes:{title:"Site E-commerce Moderne",subtitle:"Plateforme de vente en ligne avec design responsive et UX optimisée",category:"Web Design",year:2024,client:"TechCorp",description:"Création d'un site e-commerce moderne avec une interface utilisateur intuitive et un design responsive. Le projet inclut la gestion des produits, le panier d'achat, et un système de paiement sécurisé.",technologies:["Vue.js","Node.js","Stripe","MongoDB"],projectUrl:"https://example.com",featured:!0,media:{data:{id:1,attributes:{url:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop",name:"E-commerce Project",width:800,height:600,hash:"demo1",ext:".jpg",mime:"image/jpeg",size:1e5,provider:"local",createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z"}}},createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z",publishedAt:"2024-01-01T00:00:00.000Z"}},{id:2,attributes:{title:"Identité Visuelle Startup",subtitle:"Logo, charte graphique et supports de communication complets",category:"Branding",year:2024,client:"InnovateLab",description:"Développement complet de l'identité visuelle d'une startup innovante. Création du logo, de la charte graphique, et de tous les supports de communication nécessaires.",technologies:["Adobe Illustrator","Photoshop","InDesign"],featured:!0,media:{data:{id:2,attributes:{url:"https://images.unsplash.com/photo-1561070791-2526d30994b5?w=800&h=600&fit=crop",name:"Branding Project",width:800,height:600,hash:"demo2",ext:".jpg",mime:"image/jpeg",size:1e5,provider:"local",createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z"}}},createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z",publishedAt:"2024-01-01T00:00:00.000Z"}},{id:3,attributes:{title:"Application Mobile Fitness",subtitle:"App de suivi d'entraînement avec interface intuitive",category:"Mobile App",year:2023,client:"FitLife",description:"Application mobile de suivi d'entraînement avec une interface utilisateur intuitive et des fonctionnalités avancées de suivi des performances.",technologies:["React Native","Firebase","Node.js"],projectUrl:"https://play.google.com/store/apps/details?id=com.fitlife",featured:!0,media:{data:{id:3,attributes:{url:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&h=600&fit=crop",name:"Mobile App Project",width:800,height:600,hash:"demo3",ext:".jpg",mime:"image/jpeg",size:1e5,provider:"local",createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z"}}},createdAt:"2024-01-01T00:00:00.000Z",updatedAt:"2024-01-01T00:00:00.000Z",publishedAt:"2024-01-01T00:00:00.000Z"}}];return{projects:s,featuredProjects:h,loading:u,error:l,fetchProjects:w,fetchFeaturedProjects:d,fetchProject:i,getProjectsByCategory:o,getUniqueCategories:g,searchProjects:v,getStrapiMediaUrl:a=>a.startsWith("http")?a:`${Z().public.strapiUrl}${a}`}};export{D as u};
